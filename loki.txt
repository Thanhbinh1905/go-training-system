Chá»n Loki datasource â†’ nháº­p cÃ¢u query LogQL sau:

ğŸ”¹ Tá»•ng sá»‘ request:
logql
Copy
Edit
count_over_time({service="team-service"}[1m])
ğŸ”¹ Sá»‘ lÆ°á»£ng theo status code:
logql
Copy
Edit
sum by (status) (
  count_over_time({service="team-service"} |= "status" | json | status=~".*"[1m])
)
|= "status": lá»c log cÃ³ chá»©a "status"

| json: parse JSON log

status=~".*": láº¥y má»i status

sum by (status): tá»•ng theo tá»«ng mÃ£ code

[1m]: khoáº£ng thá»i gian tÃ­nh toÃ¡n (rolling má»—i 1 phÃºt)
ğŸ”¹ RiÃªng 5xx:
âŒ Total Failed Requests (500):
sum(
  count_over_time(
    {job="gin-app"} 
    | json 
    | status=~"5.." 
    [$__range]
  )
)
or vector(0)
ğŸ”¹ RiÃªng 2xx:

sum by(job) (
  count_over_time({job="team-service"} | json | status=~"2.." [$__range])
)
or vector(0)
